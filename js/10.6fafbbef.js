(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"758b":function(t,n,e){"use strict";e.d(n,"b",(function(){return h})),e.d(n,"d",(function(){return l})),e.d(n,"c",(function(){return g})),e.d(n,"a",(function(){return m})),e.d(n,"f",(function(){return f})),e.d(n,"e",(function(){return _}));e("551c"),e("06db");var a=e("2b0e"),o=e("bc3a"),r=e.n(o),s=e("18d6"),i="https://scmapi.56yhz.com/",d=r.a.create({baseURL:i,timeout:5e3}),c=r.a.create({baseURL:i,timeout:5e3}),p=r.a.create({baseURL:i,timeout:5e3}),u=r.a.create({baseURL:i,timeout:5e3});function h(t,n){return d.get(t,{params:n})}function l(t,n,e){return d.post(t,e,{params:n})}function f(t,n){return c.post(t,n)}function _(t,n){return p.post(t,n)}function g(t,n,e){return d.patch(t,e,{params:n})}function m(t,n,e){return u.delete(t,e,{params:n})}p.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),p.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),c.interceptors.request.use((function(t){var n=s["a"].getItem("authid");return t.params={openid:n},t}),(function(t){return Promise.reject(t)})),c.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),d.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),d.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),u.interceptors.request.use((function(t){var n=s["a"].getItem("openid");return t.params={openid:n},t}),(function(t){return Promise.reject(t)})),u.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),a["a"].prototype.$axios=d},a55b:function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("q-page",[[e("div",{staticClass:"q-pa-md",staticStyle:{width:"100%"}},[e("q-table",{attrs:{title:"Treats",dense:"",data:t.data,columns:t.columns,"row-key":"name",separator:t.separator,loading:t.loading,pagination:t.pagination,"no-data-label":"没有找到任何数据","no-results-label":"没有找到您想要的数据","table-style":{height:t.height}},on:{"update:pagination":function(n){t.pagination=n}},scopedSlots:t._u([{key:"top",fn:function(){return[e("q-btn-group",{attrs:{push:""}},[e("q-btn",{attrs:{unelevated:"",label:"刷新",icon:"refresh"},on:{click:function(n){return t.openidCheck()}}},[e("q-tooltip",{attrs:{"content-class":"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"}},[t._v("\n          刷新现在页面\n        ")])],1)],1),e("q-space"),e("q-input",{attrs:{outlined:"",rounded:"",dense:"",debounce:"300",color:"primary",placeholder:"请输入商品编码进行搜索"},on:{keyup:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.getList()}},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"},on:{click:function(n){return t.getList()}}})]},proxy:!0}]),model:{value:t.searchword,callback:function(n){t.searchword=n},expression:"searchword"}})]},proxy:!0},{key:"no-data",fn:function(n){var a=n.icon,o=n.message,r=n.filter;return[e("div",{staticClass:"full-width row flex-center text-accent q-gutter-sm"},[e("q-icon",{attrs:{size:"2em",name:"sentiment_dissatisfied"}}),e("span",[t._v("\n            没有找到任何数据... "+t._s(o)+"\n          ")]),e("q-icon",{attrs:{size:"2em",name:r?"filter_b_and_w":a}})],1)]}},{key:"body",fn:function(n){return[e("q-tr",{attrs:{props:n}},[e("q-td",{key:"goods_code",attrs:{props:n}},[t._v(t._s(n.row.goods_code))]),e("q-td",{key:"forcast_day",attrs:{props:n}},[t._v(t._s(n.row.forcast_day))]),e("q-td",{key:"forcast_shipping",attrs:{props:n}},[t._v(t._s(n.row.forcast_shipping))]),e("q-td",{key:"forcast_on_hand",attrs:{props:n}},[t._v(t._s(n.row.forcast_on_hand))]),e("q-td",{key:"plan_order_qty",attrs:{props:n}},[t._v("\n            "+t._s(n.row.plan_order_qty)+"\n            "),e("q-popup-edit",{key:"forcast_on_hand",attrs:{title:"模拟下单",buttons:"",persistent:""},on:{save:function(e){return t.inde(n.row.plan_order_qty,n.rowIndex)},"before-show":function(n){return t.indedata()}},model:{value:n.row.plan_order_qty,callback:function(e){t.$set(n.row,"plan_order_qty",e)},expression:"props.row.plan_order_qty"}},[e("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"点击下方设置，模拟下单"},model:{value:n.row.plan_order_qty,callback:function(e){t.$set(n.row,"plan_order_qty",e)},expression:"props.row.plan_order_qty"}})],1)],1),e("q-td",{key:"oos",attrs:{props:n}},[t._v(t._s(n.row.oos))])],1)]}}])}),e("q-btn",{attrs:{label:"点击模拟下单，输入模拟下单数量",size:"md",align:"left",flat:"",icon:"warning"}})],1)],e("router-view")],2)},o=[],r=e("758b"),s={name:"simorder",data:function(){return{separator:"vertical",loading:!1,searchword:"",height:"",columns:[{name:"goods_code",label:"商品编码",align:"left",field:"goods_code"},{name:"forcast_day",label:"预测日期",field:"forcast_day"},{name:"forcast_shipping",label:"预测发货数量",field:"forcast_shipping"},{name:"forcast_on_hand",label:"预测剩余库存",field:"forcast_on_hand"},{name:"plan_order_qty",label:"模拟下单数量",field:"plan_order_qty"},{name:"oos",label:"断货提示",field:"oos"}],data:[],pagination:{sortBy:"forcast_day",descending:!1,page:1,rowsPerPage:50},onhand:"",leadtime:""}},methods:{openidCheck:function(){this.$q.localStorage.has("openid")&&this.getList()},getList:function(){var t=this,n=this.$q.localStorage.getItem("openid");Object(r["d"])("simorder/",{openid:n},{data:this.searchword}).then((function(n){if("200"===n.data.code){t.onhand=n.data.forcast_on_hand,t.leadtime=n.data.lead_time,t.$q.localStorage.set("simorder",n.data.data);for(var e=t.$q.localStorage.getItem("simorder"),a=[],o=[],r=[],s=[],i=[],d=[],c=[],p=0;p<89;p++){var u=p%7;0===u?c.push(e[p].forcast_shipping):1===u?a.push(e[p].forcast_shipping):2===u?o.push(e[p].forcast_shipping):3===u?r.push(e[p].forcast_shipping):4===u?s.push(e[p].forcast_shipping):5===u?i.push(e[p].forcast_shipping):6===u&&d.push(e[p].forcast_shipping)}for(var h=0,l=0,f=0,_=0,g=0,m=0,q=0,y=0;y<a.length;y++)h+=a[y];for(var b=h/a.length,v=0;v<o.length;v++)l+=o[v];for(var I=l/o.length,w=0;w<r.length;w++)f+=r[w];for(var k=f/r.length,$=0;$<s.length;$++)_+=s[$];for(var x=_/s.length,P=0;P<i.length;P++)g+=i[P];for(var S=g/i.length,Q=0;Q<d.length;Q++)m+=d[Q];for(var j=m/d.length,L=0;L<c.length;L++)q+=c[L];for(var z=q/c.length,C=0;C<90;C++)(C+90)%7===6?(e[C+90].forcast_shipping=parseInt(b),e[C+90].forcast_on_hand=t.onhand-parseInt(b),t.onhand=t.onhand-parseInt(b),t.onhand<=0&&(e[C+90].oos="已经断货")):(C+90)%7===0?(e[C+90].forcast_shipping=parseInt(I),e[C+90].forcast_on_hand=t.onhand-parseInt(I),t.onhand=t.onhand-parseInt(I),t.onhand<=0&&(e[C+90].oos="已经断货")):(C+90)%7===1?(e[C+90].forcast_shipping=parseInt(k),e[C+90].forcast_on_hand=t.onhand-parseInt(k),t.onhand=t.onhand-parseInt(k),t.onhand<=0&&(e[C+90].oos="已经断货")):(C+90)%7===2?(e[C+90].forcast_shipping=parseInt(x),e[C+90].forcast_on_hand=t.onhand-parseInt(x),t.onhand=t.onhand-parseInt(x),t.onhand<=0&&(e[C+90].oos="已经断货")):(C+90)%7===3?(e[C+90].forcast_shipping=parseInt(S),e[C+90].forcast_on_hand=t.onhand-parseInt(S),t.onhand=t.onhand-parseInt(S),t.onhand<=0&&(e[C+90].oos="已经断货")):(C+90)%7===4?(e[C+90].forcast_shipping=parseInt(j),e[C+90].forcast_on_hand=t.onhand-parseInt(j),t.onhand=t.onhand-parseInt(j),t.onhand<=0&&(e[C+90].oos="已经断货")):(C+90)%7===5&&(e[C+90].forcast_shipping=parseInt(z),e[C+90].forcast_on_hand=t.onhand-parseInt(z),t.onhand=t.onhand-parseInt(z),t.onhand<=0&&(e[C+90].oos="已经断货"));e.splice(0,90),t.data=e}else t.$q.notify({message:n.data.msg,icon:"close",color:"negative",position:"right",timeout:1500})})).catch((function(t){console.log(t)}))},indedata:function(){this.$q.localStorage.set("indedata",this.data)},inde:function(t,n){var e=this,a=this.$q.localStorage.getItem("indedata");""===t?(this.data[n].plan_order_qty=0,this.data.forEach((function(t,o){if(o>=n+e.leadtime){var r=0-parseInt(a[n].plan_order_qty),s=parseInt(e.data[o].forcast_on_hand)+r;e.data[o].forcast_on_hand=s,e.data[o].forcast_on_hand>=0?e.data[o].oos="":e.data[o].forcast_on_hand<0&&(e.data[o].oos="已经断货")}}))):(this.data[n].plan_order_qty=parseInt(t),this.data.forEach((function(o,r){if(r>=n+e.leadtime){var s=parseInt(t)-parseInt(a[n].plan_order_qty),i=parseInt(e.data[r].forcast_on_hand)+s;e.data[r].forcast_on_hand=i,e.data[r].forcast_on_hand>=0?e.data[r].oos="":e.data[r].forcast_on_hand<0&&(e.data[r].oos="已经断货")}})))}},created:function(){this.openid=this.$q.localStorage.getItem("openid")},mounted:function(){this.$q.platform.is.electron?this.height=String(this.$q.screen.height-230)+"px":this.height=this.$q.screen.height-230+"px"},updated:function(){}},i=s,d=e("2877"),c=e("eebe"),p=e.n(c),u=e("9989"),h=e("eaac"),l=e("e7a9"),f=e("9c40"),_=e("05c0"),g=e("2c91"),m=e("27f9"),q=e("0016"),y=e("bd08"),b=e("db86"),v=e("42a1"),I=Object(d["a"])(i,a,o,!1,null,null,null);n["default"]=I.exports;p()(I,"components",{QPage:u["a"],QTable:h["a"],QBtnGroup:l["a"],QBtn:f["a"],QTooltip:_["a"],QSpace:g["a"],QInput:m["a"],QIcon:q["a"],QTr:y["a"],QTd:b["a"],QPopupEdit:v["a"]})}}]);