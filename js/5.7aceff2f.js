(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{7155:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticStyle:{"overflow-y":"auto"}},[[i("div",{staticClass:"q-pa-md",staticStyle:{width:"100%"}},[i("q-table",{attrs:{title:"Treats",data:e.data,columns:e.columns,"row-key":"name",selection:"multiple",selected:e.selected,filter:e.filter,grid:"","hide-header":"",loading:e.loading,"hide-bottom":"",pagination:e.pagination,"no-data-label":"没有找到任何数据","no-results-label":"没有找到您想要的数据","table-style":{height:e.height}},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[i("q-btn-group",{attrs:{push:""}},[e.admin?i("q-btn",{attrs:{unelevated:"",label:"新增",icon:"add"},on:{click:function(t){return e.addConfirm()}}},[i("q-tooltip",{attrs:{"content-class":"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"}},[e._v("\n          新增一个用户\n        ")])],1):e._e(),i("q-dialog",{attrs:{"transition-show":"jump-down","transition-hide":"jump-up"},model:{value:e.addDialog,callback:function(t){e.addDialog=t},expression:"addDialog"}},[i("q-card",{staticStyle:{"min-width":"350px"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("修改用户")])]),i("q-card-section",{staticClass:"q-pt-none"},[i("q-input",{staticStyle:{"margin-bottom":"20px"},attrs:{dense:"",label:"用户名",autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSubmit()}},model:{value:e.addform.name,callback:function(t){e.$set(e.addform,"name",t)},expression:"addform.name"}}),i("q-input",{staticStyle:{"margin-bottom":"20px"},attrs:{dense:"",label:"姓名"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSubmit()}},model:{value:e.addform.nickname,callback:function(t){e.$set(e.addform,"nickname",t)},expression:"addform.nickname"}}),i("q-input",{staticStyle:{"margin-bottom":"20px"},attrs:{dense:"",label:"密码",type:"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSubmit()}},model:{value:e.addform.password1,callback:function(t){e.$set(e.addform,"password1",t)},expression:"addform.password1"}}),i("q-input",{staticStyle:{"margin-bottom":"20px"},attrs:{dense:"",label:"确认密码",type:"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSubmit()}},model:{value:e.addform.password2,callback:function(t){e.$set(e.addform,"password2",t)},expression:"addform.password2"}})],1),i("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消"},on:{click:function(t){return e.addCancel()}}}),i("q-btn",{attrs:{color:"primary",label:"创建"},on:{click:function(t){return e.addSubmit()}}})],1)],1)],1),e.admin?i("q-btn",{attrs:{unelevated:"",label:"修改",icon:"edit"},on:{click:function(t){return e.editConfirm()}}},[i("q-tooltip",{attrs:{"content-class":"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"}},[e._v("\n         修改一个用户\n        ")])],1):e._e(),i("q-dialog",{attrs:{"transition-show":"jump-down","transition-hide":"jump-up"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[i("q-card",{staticStyle:{"min-width":"350px"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("修改用户")])]),i("q-card-section",{staticClass:"q-pt-none"},[i("q-input",{staticStyle:{"margin-bottom":"20px"},attrs:{dense:"",label:"姓名",autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editSubmit()}},model:{value:e.editform.nickname,callback:function(t){e.$set(e.editform,"nickname",t)},expression:"editform.nickname"}})],1),i("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消"},on:{click:function(t){return e.editCancel()}}}),i("q-btn",{attrs:{color:"primary",label:"修改"},on:{click:function(t){return e.editSubmit()}}})],1)],1)],1),e.admin?i("q-btn",{attrs:{unelevated:"",label:"删除",icon:"delete"},on:{click:function(t){return e.deleteConfirm()}}},[i("q-tooltip",{attrs:{"content-class":"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"}},[e._v("\n          删除所选的数据\n        ")])],1):e._e(),i("q-dialog",{attrs:{"transition-show":"jump-down","transition-hide":"jump-up"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[i("q-card",{staticStyle:{"min-width":"350px"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("删除用户")]),e._v("\n          删除操作不可逆，确认要删除吗？\n        ")]),i("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消"},on:{click:function(t){return e.deleteCancel()}}}),i("q-btn",{attrs:{color:"negative",label:"确认删除"},on:{click:function(t){return e.deleteSubmit()}}})],1)],1)],1)],1),i("q-space"),i("q-input",{attrs:{outlined:"",rounded:"",dense:"",debounce:"300",color:"primary",placeholder:"关键字进行搜索"},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"no-data",fn:function(t){var n=t.icon,o=t.message,a=t.filter;return[i("div",{staticClass:"full-width row flex-center text-accent q-gutter-sm"},[i("q-icon",{attrs:{size:"2em",name:"sentiment_dissatisfied"}}),i("span",[e._v("\n            Well this is sad... "+e._s(o)+"\n          ")]),i("q-icon",{attrs:{size:"2em",name:a?"filter_b_and_w":n}})],1)]}},{key:"top-right",fn:function(){return[i("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"item",fn:function(t){return[i("div",{staticClass:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:t.selected?"transform: scale(0.95);":""},[i("q-card",{class:t.selected?"bg-grey-2":""},[i("q-card-section",[i("q-checkbox",{attrs:{dense:"",label:t.row.name},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"props.selected"}})],1),i("q-separator"),i("q-list",{attrs:{dense:""}},e._l(t.cols.filter((function(e){return"name"!==e.name})),(function(t){return i("q-item",{key:t.name},[i("q-item-section",[i("q-item-label",[e._v(e._s(t.label))])],1),i("q-item-section",{attrs:{side:""}},[i("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.value))])],1)],1)})),1)],1)],1)]}}])})],1)],i("router-view")],2)},o=[],a=(i("7f7f"),i("758b")),s={name:"goodsunit",data:function(){return{admin:!1,separator:"vertical",loading:!1,filter:"",height:"",selected:[],columns:[{name:"name",required:!0,field:function(e){return e.name},format:function(e){return"".concat(e)}},{name:"nickname",label:"姓名",field:"nickname"},{name:"create_time",label:"创建时间",field:"create_time"},{name:"last_update_time",label:"最后更新时间",field:"last_update_time"}],data:[],deleteDialog:!1,deleteform:[],addDialog:!1,addform:{name:"",nickname:"",password1:"",password2:""},editDialog:!1,editform:{nickname:"",transaction_code:""},pagination:{sortBy:"create_time",descending:!1,page:1,rowsPerPage:100}}},methods:{getList:function(){var e=this,t=this.$q.localStorage.getItem("openid");Object(a["b"])("users/",{openid:t}).then((function(t){e.data=t.data.results.data})).catch((function(e){console.log(e)}))},addConfirm:function(){this.admincheck(),this.admin?this.addDialog=!0:(this.addDialog=!1,this.addform.name="",this.addform.nickname="",this.addform.password1="",this.addform.password2="",this.$q.notify({message:"非管理员账号，无法创建用户",icon:"close",color:"negative",position:"right",timeout:1500}))},addCancel:function(){this.addDialog=!1,this.addform.name="",this.addform.nickname="",this.addform.password1="",this.addform.password2=""},addSubmit:function(){var e=this;if(""===this.addform.name)this.$q.notify({message:"用户名不可以为空",icon:"close",color:"negative",position:"right",timeout:1500});else if(""===this.addform.nickname)this.$q.notify({message:"姓名不可以为空",icon:"close",color:"negative",position:"right",timeout:1500});else if(""===this.addform.password1)this.$q.notify({message:"请输入密码",icon:"close",color:"negative",position:"right",timeout:1500});else if(""===this.addform.password2)this.$q.notify({message:"请确认您的密码",icon:"close",color:"negative",position:"right",timeout:1500});else if(this.addform.password1!==this.addform.password2)this.$q.notify({message:"二次输入的密码不一样，请重新输入",icon:"close",color:"negative",position:"right",timeout:1500});else{var t=this.$q.localStorage.getItem("openid");Object(a["d"])("createuser/",{openid:t},{data:this.addform}).then((function(t){"200"===t.data.code?(e.$q.notify({message:"新建用户成功",icon:"check",color:"positive",position:"right",timeout:1500}),e.getList(),e.addDialog=!1,e.addform.name="",e.addform.nickname="",e.addform.password1="",e.addform.password2=""):(e.$q.notify({message:t.data.msg,icon:"close",color:"negative",position:"right",timeout:1500}),e.addDialog=!1)})).catch((function(e){console.log(e)}))}},editConfirm:function(){this.admincheck(),this.admin?0===this.selected.length?this.$q.notify({message:"您还没有选中任何一个用户",icon:"close",color:"negative",position:"right",timeout:1500}):this.selected.length>1?this.$q.notify({message:"一次只能修改一个用户",icon:"close",color:"negative",position:"right",timeout:1500}):(this.editDialog=!0,this.$q.localStorage.set("nickname",this.selected[0].nickname),this.editform.nickname=this.selected[0].nickname,this.editform.transaction_code=this.selected[0].transaction_code):(this.editDialog=!1,this.editform.nickname="",this.editform.transaction_code="",this.selected=[],this.$q.notify({message:"非管理员账号，无法修改用户",icon:"close",color:"negative",position:"right",timeout:1500}))},editCancel:function(){this.editDialog=!1,this.editform.nickname="",this.editform.transaction_code="",this.$q.localStorage.remove("nickname"),this.selected=[]},editSubmit:function(){var e=this,t=this.$q.localStorage.getItem("nickname");if(this.editform.nickname===t)this.$q.notify({message:"修改成功",icon:"check",color:"positive",position:"right",timeout:1500}),this.editDialog=!1,this.$q.localStorage.remove("nickname");else if(""===this.editform.nickname)this.editDialog=!1,this.$q.localStorage.remove("nickname");else{var i=this.$q.localStorage.getItem("openid");Object(a["c"])("users/",{openid:i},{data:this.editform}).then((function(t){"200"===t.data.code?(e.editDialog=!1,e.$q.localStorage.remove("nickname"),e.data.forEach((function(e){e.transaction_code===t.data.data.transaction_code&&(e.nickname=t.data.data.nickname)})),e.$q.notify({message:"修改成功",icon:"check",color:"positive",position:"right",timeout:1500})):(e.$q.notify({message:t.data.msg,icon:"close",color:"negative",position:"right",timeout:1500}),e.editDialog=!1)})).catch((function(e){console.log(e)}))}this.selected=[]},deleteConfirm:function(){var e=this;this.admincheck(),this.admin?(this.deleteDialog=!0,this.selected.forEach((function(t){e.deleteform.push({transaction_code:t.transaction_code})}))):(this.deleteDialog=!1,this.deleteform=[],this.selected=[],this.$q.notify({message:"非管理员账号，无法删除用户",icon:"close",color:"negative",position:"right",timeout:1500}))},deleteCancel:function(){this.deleteDialog=!1,this.deleteform=[],this.selected=[]},deleteSubmit:function(){var e=this,t=this.$q.localStorage.getItem("openid");Object(a["a"])("users/",{openid:t},{data:this.deleteform}).then((function(t){"200"===t.data.code?(e.deleteDialog=!1,e.data.forEach((function(i,n){t.data.data.forEach((function(t){i.transaction_code===t.transaction_code&&e.data.splice(n,1)}))})),e.$q.notify({message:"删除成功",icon:"check",color:"positive",position:"right",timeout:1500})):(e.$q.notify({message:t.data.msg,icon:"close",color:"negative",position:"right",timeout:1500}),e.deleteDialog=!1)})).catch((function(e){console.log(e)})),this.selected=[]},admincheck:function(){var e=this.$q.localStorage.getItem("openid"),t=this.$q.localStorage.getItem("authid");this.admin=e===t}},created:function(){this.admincheck()},mounted:function(){this.$q.localStorage.has("openid")&&this.getList(),this.$q.platform.is.electron?this.height=String(this.$q.screen.height-275)+"px":this.height=this.$q.screen.height-275+"px"},updated:function(){}},r=s,c=(i("f257"),i("2877")),d=i("eebe"),l=i.n(d),u=i("9989"),m=i("eaac"),f=i("e7a9"),p=i("9c40"),h=i("05c0"),g=i("24e8"),b=i("f09f"),k=i("a370"),q=i("27f9"),y=i("4b7e"),v=i("2c91"),_=i("0016"),w=i("8f8e"),x=i("eb85"),S=i("1c1c"),$=i("66e5"),C=i("4074"),D=i("0170"),j=i("7f67"),Q=Object(c["a"])(r,n,o,!1,null,null,null);t["default"]=Q.exports;l()(Q,"components",{QPage:u["a"],QTable:m["a"],QBtnGroup:f["a"],QBtn:p["a"],QTooltip:h["a"],QDialog:g["a"],QCard:b["a"],QCardSection:k["a"],QInput:q["a"],QCardActions:y["a"],QSpace:v["a"],QIcon:_["a"],QCheckbox:w["a"],QSeparator:x["a"],QList:S["a"],QItem:$["a"],QItemSection:C["a"],QItemLabel:D["a"]}),l()(Q,"directives",{ClosePopup:j["a"]})},"758b":function(e,t,i){"use strict";i.d(t,"b",(function(){return m})),i.d(t,"d",(function(){return f})),i.d(t,"c",(function(){return g})),i.d(t,"a",(function(){return b})),i.d(t,"f",(function(){return p})),i.d(t,"e",(function(){return h}));i("551c"),i("06db");var n=i("2b0e"),o=i("bc3a"),a=i.n(o),s=i("18d6"),r="https://scmapi.56yhz.com/",c=a.a.create({baseURL:r,timeout:5e3}),d=a.a.create({baseURL:r,timeout:5e3}),l=a.a.create({baseURL:r,timeout:5e3}),u=a.a.create({baseURL:r,timeout:5e3});function m(e,t){return c.get(e,{params:t})}function f(e,t,i){return c.post(e,i,{params:t})}function p(e,t){return d.post(e,t)}function h(e,t){return l.post(e,t)}function g(e,t,i){return c.patch(e,i,{params:t})}function b(e,t,i){return u.delete(e,i,{params:t})}l.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),l.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),d.interceptors.request.use((function(e){var t=s["a"].getItem("authid");return e.params={openid:t},e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),c.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),c.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),u.interceptors.request.use((function(e){var t=s["a"].getItem("openid");return e.params={openid:t},e}),(function(e){return Promise.reject(e)})),u.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),n["a"].prototype.$axios=c},"970c":function(e,t,i){},f257:function(e,t,i){"use strict";var n=i("970c"),o=i.n(n);o.a}}]);